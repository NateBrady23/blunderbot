<!- This is a separate html file to be used as a browser source in streamlabs obs. -->
<html lang="en">
<head>
  <script src="https://localhost/scripts/socket.io.min.js" ></script>
  <script src="https://localhost/scripts/utils.js" ></script>
  <link rel="stylesheet" href="https://localhost/css/blunder-alerts.css" ></link>
  <title></title>
</head>
<body>
</body>
<script>
  const MESSAGE_TYPE = {
    ALERT: 'ALERT',
    SERVER_MESSAGE: 'serverMessage'
  };
  const socket = io(`https://localhost/app-socket`, {
    transports: ['polling'],
    timeout: 200000000
  });
  socket.on('connect', () => console.log('Connected!'));
  socket.on('connect_error', (err) => console.log(`connect_error due to ${err.message}`));
  socket.on('disconnect', () => console.log('Disconnected!'));

  socket.on(MESSAGE_TYPE.SERVER_MESSAGE, async (data) => {
    if (data.type === MESSAGE_TYPE.ALERT) {
      drawAlert(data.message, data.milliseconds);
    }
  });
</script>
</html>